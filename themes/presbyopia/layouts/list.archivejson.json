[
  {{- $list := (where site.AllPages "Type" "in" site.Params.indexSections) -}}
  {{- $len := (len $list) -}}
  {{ range $index, $value := $list }}
    {{- if .Plain }}
      {
        {{- if .Title }}
        "title": {{ .Title | jsonify }},
        {{- else if .Params.x_title }}
        "title": {{ if .Params.x_source -}}{{ printf "%s â€” %s" .Params.x_title .Params.x_source | jsonify }}{{ else -}}{{ .Params.x_title | jsonify }}{{ end -}},
        {{- end }}
        "date_published": "{{ .Date.Format "2006-01-02T15:04:05-07:00" }}",
        "url": "{{ .Permalink | relURL }}",
        "tags": "{{ with .Params.tags }}{{ delimit . ", " }}{{ end }}",
        "content_text": {{ .Plain | truncate 2000 | jsonify }}
      }
      {{- if ne (add $index 1) $len -}},{{- end -}}
    {{ end -}}
  {{ end }}
]
